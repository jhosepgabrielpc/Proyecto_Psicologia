<%- include('../partials/header', { title: 'Evaluación - MindCare' }) %>

<style>
    .option-card {
        cursor: pointer;
        transition: all 0.2s ease;
    }
    /* Ocultar radio buttons nativos */
    .option-input:checked + .option-card {
        background-color: #4f46e5;
        color: white;
        border-color: #4f46e5;
        transform: scale(1.02);
        box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.3);
    }
    .option-input:checked + .option-card .circle-check {
        background-color: white;
        border-color: white;
    }
    .option-input:checked + .option-card .circle-check::after {
        content: '';
        display: block;
        width: 8px;
        height: 8px;
        background-color: #4f46e5;
        border-radius: 50%;
    }
</style>

<div class="min-h-screen bg-slate-50 py-10 font-sans">
    <div class="max-w-3xl mx-auto px-4">
        
        <div class="text-center mb-10 animate-fade-in-down">
            <span class="text-xs font-bold text-indigo-500 uppercase tracking-widest bg-indigo-50 px-3 py-1 rounded-full">Evaluación Clínica</span>
            <h1 class="text-3xl font-black text-slate-900 mt-3"><%= testInfo.title %></h1>
            <p class="text-slate-500 mt-2 text-lg"><%= testInfo.subtitle %></p>
        </div>

        <form action="/dashboard/test/<%= testType %>/save" method="POST" class="space-y-12">
            
            <% testInfo.questions.forEach((question, index) => { %>
                <div class="bg-white rounded-3xl p-8 shadow-sm border border-slate-100 relative overflow-hidden group hover:shadow-md transition-all">
                    <div class="absolute top-0 left-0 bg-slate-100 px-4 py-2 rounded-br-2xl text-xs font-bold text-slate-500">
                        Pregunta <%= index + 1 %> de <%= testInfo.questions.length %>
                    </div>

                    <h3 class="text-xl font-bold text-slate-800 mt-4 mb-6 leading-relaxed">
                        <%= question %>
                    </h3>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        
                        <label class="relative">
                            <input type="radio" name="respuestas[<%= index %>]" value="0" class="option-input sr-only" required>
                            <div class="option-card p-4 rounded-xl border-2 border-slate-100 bg-slate-50 flex items-center gap-3 hover:border-indigo-200">
                                <div class="circle-check w-5 h-5 rounded-full border-2 border-slate-300 flex items-center justify-center flex-shrink-0"></div>
                                <span class="font-medium text-sm">Nunca</span>
                            </div>
                        </label>

                        <label class="relative">
                            <input type="radio" name="respuestas[<%= index %>]" value="1" class="option-input sr-only">
                            <div class="option-card p-4 rounded-xl border-2 border-slate-100 bg-slate-50 flex items-center gap-3 hover:border-indigo-200">
                                <div class="circle-check w-5 h-5 rounded-full border-2 border-slate-300 flex items-center justify-center flex-shrink-0"></div>
                                <span class="font-medium text-sm">Varios días</span>
                            </div>
                        </label>

                        <label class="relative">
                            <input type="radio" name="respuestas[<%= index %>]" value="2" class="option-input sr-only">
                            <div class="option-card p-4 rounded-xl border-2 border-slate-100 bg-slate-50 flex items-center gap-3 hover:border-indigo-200">
                                <div class="circle-check w-5 h-5 rounded-full border-2 border-slate-300 flex items-center justify-center flex-shrink-0"></div>
                                <span class="font-medium text-sm">Más de la mitad de los días</span>
                            </div>
                        </label>

                        <label class="relative">
                            <input type="radio" name="respuestas[<%= index %>]" value="3" class="option-input sr-only">
                            <div class="option-card p-4 rounded-xl border-2 border-slate-100 bg-slate-50 flex items-center gap-3 hover:border-indigo-200">
                                <div class="circle-check w-5 h-5 rounded-full border-2 border-slate-300 flex items-center justify-center flex-shrink-0"></div>
                                <span class="font-medium text-sm">Casi todos los días</span>
                            </div>
                        </label>

                    </div>
                </div>
            <% }); %>

            <div class="flex justify-center pt-4 pb-10">
                <button type="submit" class="bg-slate-900 text-white text-lg font-bold py-4 px-12 rounded-2xl shadow-xl hover:bg-slate-800 hover:shadow-2xl hover:-translate-y-1 transition-all flex items-center gap-3">
                    <span>Enviar Resultados</span>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

        </form>
    </div>
</div>

<%- include('../partials/footer') %>